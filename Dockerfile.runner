FROM node:22-slim

WORKDIR /app

# Install dependencies only (since we have built code)
COPY package.json ./
RUN npm install

# Copy pre-built code
COPY dist ./dist

# Create necessary directories
RUN mkdir -p ./tmp ./public

ENV NODE_ENV=production
ENV PORT=5000

EXPOSE 5000

CMD ["node", "dist/server.js"]
